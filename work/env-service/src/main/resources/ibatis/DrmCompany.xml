<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" 
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="com.env.dto.DrmCompany">

	<typeAlias alias="drmCompanyEntity" type="com.env.dto.DrmCompany" />
	<resultMap id="drmCompany" class="com.env.dto.DrmCompany">
		<!-- jdbcType="int" javaType="java.lang.Integer" -->
		<!-- jdbcType="varchar" javaType="java.lang.String" -->
		<!-- jdbcType="datetime" javaType="java.util.Date" -->
		<result property="id" column="id" />
		<result property="userId" column="user_id" />
		<result property="companyLibId" column="company_lib_id" />
		<result property="companyName" column="company_name" />
		<result property="deptName" column="dept_name" />
		<result property="companySize" column="company_size" />
		<result property="address" column="address" />
		<result property="sexratio" column="sexratio" />
		<result property="culture" column="culture" />
		<result property="advantage" column="advantage" />
		<result property="weakness" column="weakness" />
		<result property="traffic" column="traffic" />
		<result property="postname" column="postname" />
		<result property="workcontent" column="workcontent" />
		<result property="atmosphere" column="atmosphere" />
		<result property="boss" column="boss" />
		<result property="indate" column="indate" />
		<result property="outdate" column="outdate" />
		<result property="jobDuration" column="job_duration" />
		<result property="overtime" column="overtime" />
		<result property="hasbus" column="hasbus" />
		<result property="provideContent" column="provide_content" />
		<result property="wordCount" column="word_count" />
		<result property="provideType" column="provide_type" />
		<result property="qq" column="qq" />
		<result property="weixin" column="weixin" />
		<result property="phone" column="phone" />
		<result property="email" column="email" />
		<result property="zhanneixin" column="zhanneixin" />
		<result property="ptshow" column="ptshow" />
		<result property="price" column="price" />
		<result property="faceprice" column="faceprice" />
		<result property="version" column="version" />
		<result property="disabled" column="disabled" />
		<result property="createUserid" column="create_userid" />
		<result property="createTime" column="create_time" />
		<result property="updateUserid" column="update_userid" />
		<result property="updateTime" column="update_time" />
		
	</resultMap>

	<!-- 用于select查询公用抽取的列 -->
	<sql id="drmCompany.columns">
	    <![CDATA[
        id, user_id, company_lib_id, company_name, dept_name, company_size, address, sexratio, culture, advantage, weakness, traffic, postname, workcontent, atmosphere, boss, indate, outdate, job_duration, overtime, hasbus, provide_content, word_count, provide_type, qq, weixin, phone, email, zhanneixin, ptshow, price, faceprice, version, disabled, create_userid, create_time, update_userid, update_time
	    ]]>
	</sql>

	<!-- 新增记录 -->
	<insert id="save" parameterClass="drmCompanyEntity">
	    <![CDATA[
	        INSERT INTO DRM_COMPANY (
	        	id, 
	        	user_id, 
	        	company_lib_id, 
	        	company_name, 
	        	dept_name, 
	        	company_size, 
	        	address, 
	        	sexratio, 
	        	culture, 
	        	advantage, 
	        	weakness, 
	        	traffic, 
	        	postname, 
	        	workcontent, 
	        	atmosphere, 
	        	boss, 
	        	indate, 
	        	outdate, 
	        	job_duration, 
	        	overtime, 
	        	hasbus, 
	        	provide_content, 
	        	word_count, 
	        	provide_type, 
	        	qq, 
	        	weixin, 
	        	phone, 
	        	email, 
	        	zhanneixin, 
	        	ptshow, 
	        	price, 
	        	faceprice, 
	        	version, 
	        	disabled, 
	        	create_userid, 
	        	create_time, 
	        	update_userid, 
	        	update_time
	        ) VALUES (
	        	#id#, 
	        	#userId#, 
	        	#companyLibId#, 
	        	#companyName#, 
	        	#deptName#, 
	        	#companySize#, 
	        	#address#, 
	        	#sexratio#, 
	        	#culture#, 
	        	#advantage#, 
	        	#weakness#, 
	        	#traffic#, 
	        	#postname#, 
	        	#workcontent#, 
	        	#atmosphere#, 
	        	#boss#, 
	        	#indate#, 
	        	#outdate#, 
	        	#jobDuration#, 
	        	#overtime#, 
	        	#hasbus#, 
	        	#provideContent#, 
	        	#wordCount#, 
	        	#provideType#, 
	        	#qq#, 
	        	#weixin#, 
	        	#phone#, 
	        	#email#, 
	        	#zhanneixin#, 
	        	#ptshow#, 
	        	#price#, 
	        	#faceprice#, 
	        	#version#, 
	        	#disabled#, 
	        	#createUserid#, 
	        	#createTime#, 
	        	#updateUserid#, 
	        	#updateTime#
	        )
	    ]]>
		<selectKey resultClass="java.lang.Integer" type="post"
			keyProperty="id">
			SELECT LAST_INSERT_ID()
		</selectKey>
	</insert>


	<!-- 新增记录 -->
	<insert id="insert" parameterClass="drmCompanyEntity">
	    <![CDATA[
	        INSERT INTO DRM_COMPANY (
	        	id, 
	        	user_id, 
	        	company_lib_id, 
	        	company_name, 
	        	dept_name, 
	        	company_size, 
	        	address, 
	        	sexratio, 
	        	culture, 
	        	advantage, 
	        	weakness, 
	        	traffic, 
	        	postname, 
	        	workcontent, 
	        	atmosphere, 
	        	boss, 
	        	indate, 
	        	outdate, 
	        	job_duration, 
	        	overtime, 
	        	hasbus, 
	        	provide_content, 
	        	word_count, 
	        	provide_type, 
	        	qq, 
	        	weixin, 
	        	phone, 
	        	email, 
	        	zhanneixin, 
	        	ptshow, 
	        	price, 
	        	faceprice, 
	        	version, 
	        	disabled, 
	        	create_userid, 
	        	create_time, 
	        	update_userid, 
	        	update_time
	        ) VALUES (
	        	#id#, 
	        	#userId#, 
	        	#companyLibId#, 
	        	#companyName#, 
	        	#deptName#, 
	        	#companySize#, 
	        	#address#, 
	        	#sexratio#, 
	        	#culture#, 
	        	#advantage#, 
	        	#weakness#, 
	        	#traffic#, 
	        	#postname#, 
	        	#workcontent#, 
	        	#atmosphere#, 
	        	#boss#, 
	        	#indate#, 
	        	#outdate#, 
	        	#jobDuration#, 
	        	#overtime#, 
	        	#hasbus#, 
	        	#provideContent#, 
	        	#wordCount#, 
	        	#provideType#, 
	        	#qq#, 
	        	#weixin#, 
	        	#phone#, 
	        	#email#, 
	        	#zhanneixin#, 
	        	#ptshow#, 
	        	#price#, 
	        	#faceprice#, 
	        	#version#, 
	        	#disabled#, 
	        	#createUserid#, 
	        	#createTime#, 
	        	#updateUserid#, 
	        	#updateTime#
	        )
	    ]]>
		<selectKey resultClass="java.lang.Integer" type="post"
			keyProperty="id">
			SELECT LAST_INSERT_ID()
		</selectKey>
	</insert>

	<!-- 通过ID修改 -->
	<update id="update" parameterClass="drmCompanyEntity">
	    <![CDATA[
	        UPDATE DRM_COMPANY SET
		        user_id = #userId#, 
		        company_lib_id = #companyLibId#, 
		        company_name = #companyName#, 
		        dept_name = #deptName#, 
		        company_size = #companySize#, 
		        address = #address#, 
		        sexratio = #sexratio#, 
		        culture = #culture#, 
		        advantage = #advantage#, 
		        weakness = #weakness#, 
		        traffic = #traffic#, 
		        postname = #postname#, 
		        workcontent = #workcontent#, 
		        atmosphere = #atmosphere#, 
		        boss = #boss#, 
		        indate = #indate#, 
		        outdate = #outdate#, 
		        job_duration = #jobDuration#, 
		        overtime = #overtime#, 
		        hasbus = #hasbus#, 
		        provide_content = #provideContent#, 
		        word_count = #wordCount#, 
		        provide_type = #provideType#, 
		        qq = #qq#, 
		        weixin = #weixin#, 
		        phone = #phone#, 
		        email = #email#, 
		        zhanneixin = #zhanneixin#, 
		        ptshow = #ptshow#, 
		        price = #price#, 
		        faceprice = #faceprice#, 
		        version = #version#, 
		        disabled = #disabled#, 
		        create_userid = #createUserid#, 
		        create_time = #createTime#, 
		        update_userid = #updateUserid#, 
		        update_time = #updateTime#
	        WHERE 
		        id = #id#
	    ]]>
	</update>

	<!-- 通过ID删除 -->
	<delete id="delete">
	    <![CDATA[
	        UPDATE DRM_COMPANY SET
		        disabled = 1, 
		        update_time = now()
	        WHERE 
		        id = #id#
	    ]]>
	</delete>

	<!-- 通过ID列表批量删除 -->
	<delete id="deleteByIds" parameterClass="java.lang.String">
	    <![CDATA[
	        DELETE FROM DRM_COMPANY WHERE
	        id IN ($ids$)
	    ]]>
	</delete>

	<!-- 通过ID查询 -->
	<select id="getById" resultMap="drmCompany">
		SELECT
		<include refid="drmCompany.columns" />
	    <![CDATA[
	        FROM DRM_COMPANY 
	        WHERE 
		        id = #id#
	    ]]>
	</select>

	<!-- 用于分页查询抽取的公共的条件 -->
	<sql id="drmCompany.queryPage">
		<dynamic prepend="WHERE">
		    <isNotNull property="entity">
				<isNotEmpty prepend="AND" property="entity.id">
		            <![CDATA[
					id = #entity.id#
		            ]]>
				</isNotEmpty>
				<isNotEmpty prepend="AND" property="entity.userId">
		            <![CDATA[
					user_id,  = #entity.userId#
		            ]]>
				</isNotEmpty>
				<isNotEmpty prepend="AND" property="entity.companyLibId">
		            <![CDATA[
					company_lib_id = #entity.companyLibId#
		            ]]>
				</isNotEmpty>
				<isNotEmpty prepend="AND" property="entity.companyName">
		            <![CDATA[
					company_name = #entity.companyName#
		            ]]>
				</isNotEmpty>
				<isNotEmpty prepend="AND" property="entity.companySize">
		            <![CDATA[
					company_size = #entity.companySize#
		            ]]>
				</isNotEmpty>
				<isNotEmpty prepend="AND" property="entity.address">
		            <![CDATA[
					address = #entity.address#
		            ]]>
				</isNotEmpty>
				<isNotEmpty prepend="AND" property="entity.sexratio">
		            <![CDATA[
					sexratio = #entity.sexratio#
		            ]]>
				</isNotEmpty>
				<isNotEmpty prepend="AND" property="entity.culture">
		            <![CDATA[
					culture = #entity.culture#
		            ]]>
				</isNotEmpty>
				<isNotEmpty prepend="AND" property="entity.advantage">
		            <![CDATA[
					advantage = #entity.advantage#
		            ]]>
				</isNotEmpty>
				<isNotEmpty prepend="AND" property="entity.weakness">
		            <![CDATA[
					weakness = #entity.weakness#
		            ]]>
				</isNotEmpty>
				<isNotEmpty prepend="AND" property="entity.traffic">
		            <![CDATA[
					traffic = #entity.traffic#
		            ]]>
				</isNotEmpty>
				<isNotEmpty prepend="AND" property="entity.postname">
		            <![CDATA[
					postname = #entity.postname#
		            ]]>
				</isNotEmpty>
				<isNotEmpty prepend="AND" property="entity.workcontent">
		            <![CDATA[
					workcontent = #entity.workcontent#
		            ]]>
				</isNotEmpty>
				<isNotEmpty prepend="AND" property="entity.atmosphere">
		            <![CDATA[
					atmosphere = #entity.atmosphere#
		            ]]>
				</isNotEmpty>
				<isNotEmpty prepend="AND" property="entity.boss">
		            <![CDATA[
					boss = #entity.boss#
		            ]]>
				</isNotEmpty>
				<isNotEmpty prepend="AND" property="entity.indate">
		            <![CDATA[
					indate = #entity.indate#
		            ]]>
				</isNotEmpty>
				<isNotEmpty prepend="AND" property="entity.outdate">
		            <![CDATA[
					outdate = #entity.outdate#
		            ]]>
				</isNotEmpty>
				<isNotEmpty prepend="AND" property="entity.jobDuration">
		            <![CDATA[
					job_duration = #entity.jobDuration#
		            ]]>
				</isNotEmpty>
				<isNotEmpty prepend="AND" property="entity.overtime">
		            <![CDATA[
					overtime = #entity.overtime#
		            ]]>
				</isNotEmpty>
				<isNotEmpty prepend="AND" property="entity.hasbus">
		            <![CDATA[
					hasbus = #entity.hasbus#
		            ]]>
				</isNotEmpty>
				<isNotEmpty prepend="AND" property="entity.wordCount">
		            <![CDATA[
					word_count = #entity.wordCount#
		            ]]>
				</isNotEmpty>
				<isNotEmpty prepend="AND" property="entity.version">
		            <![CDATA[
					version = #entity.version#
		            ]]>
				</isNotEmpty>
				<isNotEmpty prepend="AND" property="entity.disabled">
		            <![CDATA[
					disabled = #entity.disabled#
		            ]]>
				</isNotEmpty>
				<isNotEmpty prepend="AND" property="entity.createUserid">
		            <![CDATA[
					create_userid = #entity.createUserid#
		            ]]>
				</isNotEmpty>
				<isNotEmpty prepend="AND" property="entity.createTime">
		            <![CDATA[
					create_time = #entity.createTime#
		            ]]>
				</isNotEmpty>
				<isNotEmpty prepend="AND" property="entity.updateUserid">
		            <![CDATA[
					update_userid = #entity.updateUserid#
		            ]]>
				</isNotEmpty>
				<isNotEmpty prepend="AND" property="entity.updateTime">
		            <![CDATA[
					update_time = #entity.updateTime#
		            ]]>
				</isNotEmpty>
			</isNotNull>
		</dynamic>
	</sql>

	<!-- 为分页查询符合条件的记录数 -->
	<select id="queryByPage_count" resultClass="int">
		SELECT count(*) FROM DRM_COMPANY
		<include refid="drmCompany.queryPage" />
	</select>

	<!-- 分页查询指定页记录 -->
	<select id="queryByPage" resultMap="drmCompany">
		SELECT
		<include refid="drmCompany.columns" />
	    <![CDATA[
	        FROM DRM_COMPANY 
	    ]]>
		<include refid="drmCompany.queryPage" />
		<![CDATA[
		    LIMIT #paging.startRecord#, #paging.pageSize#
        ]]>
	</select>

	<!-- 查询所有记录 -->
	<select id="queryAll" resultMap="drmCompany">
		SELECT
		<include refid="drmCompany.columns" />
	    <![CDATA[
		    FROM DRM_COMPANY
		    WHERE disabled = 0
	    ]]>
	</select>
	<select id="queryAllByUserid" resultMap="drmCompany">
		SELECT
		<include refid="drmCompany.columns" />
	    <![CDATA[
		    FROM DRM_COMPANY
		    WHERE disabled = 0
		    AND	  user_id = #userId#
	    ]]>
	</select>
</sqlMap>